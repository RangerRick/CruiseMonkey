/*!
 * Angular Mobile Frame - v0.0.1
 *
 * 2013-07-09
 *
 * Handy frame-elements for a typical mobile website with off-canvas-navigation.
 *
 * https://github.com/herschel666/angular-mobile-frame
 *
 * Copyright (c) 2013 Emanuel Kluge;
 * Licensed WTFPL
**/
!function(a){var b="$mobileFrame",c="directive";a.module("ek.mobileFrame",["ng"]).provider("$mobileFrame",function(){var a,b,c;this.$get=function(){return{getHeaderHeight:function(){return a},getFooterHeight:function(){return b},getNavWidth:function(){return c}}},this.setHeaderHeight=function(b){return a=b,this},this.setFooterHeight=function(a){return b=a,this},this.setNavWidth=function(a){return c=a,this}}).controller("MobileFrameCtrl",function(){var a=this;this.toggleNav=function(){a.callback.call()},this.onNavToggle=function(b){a.callback=b}})[c]("mobileFrame",[b,"$location",function(a,b){function c(){var a=f?0:e;(!arguments.length||f)&&(d.css({"-webkit-transform":"translate3d("+a+"px, 0, 0)","-moz-transform":"translate3d("+a+"px, 0, 0)",transform:"translate3d("+a+"px, 0, 0)"}),f=!f)}var d,e=a.getNavWidth(),f=!1;return{restrict:"E",transclude:!0,scope:!0,replace:!0,controller:"MobileFrameCtrl",template:'<section class="mobile-frame" ng-transclude></section>',link:function(a,f,g,h){d=f.css({paddingLeft:e+"px",left:-e+"px"}),h.onNavToggle(c),a.location=b,a.$watch("location.path()",c)}}}])[c]("mobileHeader",[b,function(b){return{restrict:"E",require:"^mobileFrame",transclude:!0,replace:!0,template:['<header class="mobile-header" role="banner">','	<button type="button" class="mobile-nav-toggle" id="mobile-nav-toggle">&nbsp;</button>','	<div class="mobile-header-inner" ng-transclude></div>',"</header>"].join(""),link:function(c,d,e,f){d.css("height",b.getHeaderHeight()+"px"),a.element(document.getElementById("mobile-nav-toggle")).bind("click",f.toggleNav)}}}])[c]("mobileNav",[b,function(a){return{restrict:"E",transclude:!0,replace:!0,template:['<div class="mobile-nav">','	<div class="mobile-nav-inner" ng-transclude></div>',"</div>"].join(""),link:function(b,c){var d=a.getNavWidth();c.css("width",d+"px")}}}])[c]("mobileContent",[b,"$window","$compile",function(b,c,d){function e(){return c.innerHeight-(b.getHeaderHeight()+b.getFooterHeight())}function f(b){var c=b.find("div");return a.forEach(g,function(b,d){var e,f;a.isString(b)&&(f=g.$attr[d],e="class"===f?c.attr("class")+" "+b:b,c.attr(f,e))}),b}var g,h=a.element(['<div class="mobile-content" role="main">','	<div class="mobile-content-inner"></div>',"</div>"].join(""));return{restrict:"E",transclude:"element",scope:!0,compile:function(b,i,j){return g=i,function(b,g){j(b,function(i){var j=f(h);j.find("div").html(i.html()),d(j)(b),g.replaceWith(j),j.css("height",e()+"px"),a.element(c).bind("resize",function(){j.css("height",e()+"px")})})}}}}])[c]("mobileFooter",[b,function(a){return{restrict:"E",transclude:!0,replace:!0,template:['<footer class="mobile-footer">','	<div class="mobile-footer-inner" ng-transclude></div>',"</footer>"].join(""),link:function(b,c){c.css("height",a.getFooterHeight()+"px")}}}])}(angular);
