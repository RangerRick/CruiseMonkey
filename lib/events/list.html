<ion-view class="event-list searchable">
	<ion-nav-buttons side="primary">
		<button class="button button-icon icon-yellow cm-icon-clock" ng-click="goToNow($event, true)"></button>
		<button class="button button-icon icon-yellow cm-icon-nav-up" ng-click="scrollTop($event)"></button>
	</ion-nav-buttons>
	<ion-nav-title ng-click="openEventTypePopover($event)" class="event-title">
		<span>{{eventType.capitalize()}} Events <span style="font-size: x-small">&#9660;</span></span>
	</ion-nav-title>
	<ion-nav-buttons side="secondary">
		<button class="button button-icon icon-yellow cm-icon-plus" ng-click="addEvent($event)" ng-if="u.loggedIn()"></button>
		<button class="button button-icon icon cm-icon-search" ng-click="showFilterBar()"></button>
	</ion-nav-buttons>
	<ion-content ion-sticky scroll="true" padding="false" id="event-content" delegate-handle="event-scroll" ng-click="closeKeyboard()">
		<ion-refresher pulling-text="Pull to refresh..." on-refresh="doRefresh()"></ion-refresher>
		<ion-list>
			<span ng-repeat="entry in events track by entry.getHash()" id="{{entry.getId()}}">
				<ion-item ng-if="isDay(entry)" class="item-divider event-header">{{prettyDate(entry.day)}}</ion-item>
				<ion-item ng-if="!isDay(entry)" ng-class="'item-text-wrap list-entry ' + getCssClass(entry)">
					<span class="item-note">
						<button id="{{entry.getId()}}-favorite" ng-click="toggleFavorite(entry)" class="button button-small button-clear button-navy" ng-show="showFavorite(entry)"><i class="icon" ng-class="entry.isFavorite(user.username)? 'active ion-ios-heart':'ion-ios-heart-outline'"></i></button>
						<button class="button button-small button-clear button-navy" ng-click="openPopover($event, entry)" ng-show="showEditable(entry)"><i class="icon ion-android-more-vertical"></i></button>
					</span>
					<span>
					<div class="summary">
						<span ng-bind-html="highlight(entry.getSummary(), searchString)"></span>
						<i class="icon icon-navy ion-eye-disabled" ng-if="!entry.isShared()"></i>
					</div>
					<div class="time">Time: {{entry.getDisplayTime()}}</div>
					<div class="createdBy" ng-if="entry.isOfficial()"><img ng-src="{{officialIcon}}" style="max-height: 14px" ng-if="entry.isOfficial()" /> Official Event</div>
					<div class="createdBy" ng-if="!entry.isOfficial()" ng-bind-html="'Created By: ' + highlight(entry.getUsername(), searchString)" ng-click="openUser(entry.getUsername(), $event)"></div>
					<div class="location" ng-if="entry.getLocation()">Location: <span ng-bind-html="highlight(entry.getLocation(), searchString)"></span></div>
					<div class="description" ng-if="entry.getDescription()" ng-bind-html="highlight(entry.getFormattedDescription(), searchString)"></div>
					</span>
				</ion-item>
			</span>
			<div id="the-end"></div>
		</ion-list>
	</ion-content>
</ion-view>
